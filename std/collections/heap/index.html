<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>std::collections::heap - Alumina Docs</title>
<link rel="stylesheet" href="/static/styles.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content=" Binary heap collection and utilities." />
<link rel="apple-touch-icon" sizes="180x180" href="/static/apple-touch-icon.png" />
<link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png" />
<link rel="manifest" href="/static/manifest.json" />
<link rel="mask-icon" href="/static/safari-pinned-tab.svg" color="#5bbad5" />
<link rel="shortcut icon" href="/static/favicon.ico" />
<link rel="canonical" href="https://docs.alumina-lang.net/std/collections/heap/" />
<meta name="msapplication-TileColor" content="#da532c" />
<meta name="msapplication-config" content="/static/browserconfig.xml" />
<meta name="description" content="Documentation for the Alumina standard library" />
<script src="/static/site.js"></script>
<script src="/search_index.js" async></script>
<link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400;500&family=Source+Code+Pro:wght@400;600&family=Source+Serif+4:opsz,wght@8..60,400;8..60,700&display=swap" rel="stylesheet">
</head>
<body>
<nav>
<a href="/">
<img width="100px" height="100px" class="logo" src="/static/logo.svg" alt="Alumina Docs">
</a>
<h1><a class="breadcrumbs" href="/std/">std</a>::<a class="breadcrumbs" href="/std/collections/">collections</a>::<a class="breadcrumbs" href="/std/collections/heap/">heap</a></h1>
</h1>
<h2>Structs</h2>
<ul>
<li>
<a href="/std/collections/heap/BinaryHeap.html">BinaryHeap</a>
</li>
<li>
<a href="/std/collections/heap/HeapIterator.html">HeapIterator</a>
</li>
</ul>
<h2>Functions</h2>
<ul>
<li>
<a href="/std/collections/heap/#item.heapify_by">heapify_by</a>
</li>
<li>
<a href="/std/collections/heap/#item.heapify_tail_by">heapify_tail_by</a>
</li>
<li>
<a href="/std/collections/heap/#item.sort_heap_by">sort_heap_by</a>
</li>
<li>
<a href="/std/collections/heap/#item.sift_up_by">sift_up_by</a>
</li>
<li>
<a href="/std/collections/heap/#item.sift_down_by">sift_down_by</a>
</li>
<li>
<a href="/std/collections/heap/#item.sift_down_to_bottom_by">sift_down_to_bottom_by</a>
</li>
</ul>
</nav>
<div class="main-container">
<div id="search-container">
<a class="mobile-only" href="/">
<img width="40px" height="40px" class="logo" src="/static/logo.svg" alt="Alumina Docs">
</a>
<input id="search-input" class="search-input" autocomplete="off" spellcheck="false" placeholder="Search the documentation..." type="search"></input>
</div>
<div id="search-results"></div>
<main id="main-content">
<div class="main-title"><h1>Module <a class="breadcrumbs" href="/std/">std</a>::<a class="breadcrumbs" href="/std/collections/">collections</a>::<a class="breadcrumbs" href="/std/collections/heap/">heap</a></h1>
</h1>
</div>
<p>
Binary heap collection and utilities.
</p><p>
This module provides an allocating binary heap collection type, <a class="path-link" href="/std/collections/heap/BinaryHeap.html">BinaryHeap</a> as well as
methods for in-place binary heaps over raw slices (<a class="path-link" href="/std/collections/heap/#item.heapify_by">heapify_by</a>, <a class="path-link" href="/std/collections/heap/#item.sift_up_by">sift_up_by</a>, <a class="path-link" href="/std/collections/heap/#item.sift_down_by">sift_down_by</a>, ...).
</p><p>
</p>
<h2 id="Struct">Structs</h2>
<div class="item-short-table">
<div class="row" id="item.BinaryHeap">
<div class="cell-name">
<a href="/std/collections/heap/BinaryHeap.html">BinaryHeap</a>
</div>
<div class="cell-doc">A binary max-heap (priority queue).
</div>
</div>
<div class="row" id="item.HeapIterator">
<div class="cell-name">
<a href="/std/collections/heap/HeapIterator.html">HeapIterator</a>
</div>
<div class="cell-doc">Draining heap iterator.
</div>
</div>
</div>
<h2 id="Function">Functions</h2>
<ul>
<li>
<div class="signature" id="item.heapify_by">
<h4>
<span class="keyword">fn</span> <span class="identifier-function">heapify_by</span>&lt;T, F&gt;(self: &amp;mut [T], f: F)<div class="protocol-bound">
F: <a href="/std/cmp/#item.CompareFunction"><span class="identifier-type">CompareFunction</span></a>&lt;T&gt;</div>
</h4>
<div class="source-link">
<a href="https://github.com/tibordp/alumina/blob/master/sysroot/std/collections/heap.alu#L568-L574"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Reorder the elements of a slice so they satisfy the (max) heap property.
</p><p>
</p>
<h3> Example</h3>
<p>
<pre class="with-playground-link"><code class="language-alumina">use std::collections::heap::heapify_by;
use std::cmp::compare;

let v = [3, 5, 1, 2, 9, 8];
v[..].heapify_by(compare::&lt;i32&gt;);

assert_eq!(v[0], 9); // max element
</code><a class="playground-link" target="_blank" href="https://play.alumina-lang.net/?q=fn%20main%28%29%20%7b%0a%20%20%20%20use%20std%3a%3acollections%3a%3aheap%3a%3aheapify%5fby%3b%0a%20%20%20%20use%20std%3a%3acmp%3a%3acompare%3b%0a%20%20%20%20%0a%20%20%20%20let%20v%20%3d%20%5b3%2c%205%2c%201%2c%202%2c%209%2c%208%5d%3b%0a%20%20%20%20v%5b%2e%2e%5d%2eheapify%5fby%28compare%3a%3a%3ci32%3e%29%3b%0a%20%20%20%20%0a%20%20%20%20assert%5feq%21%28v%5b0%5d%2c%209%29%3b%20%2f%2f%20max%20element%0a%7d%0a">Run this example</a></pre>
</p><p>
</p>
</div>
</li>
<li>
<div class="signature" id="item.heapify_tail_by">
<h4>
<span class="keyword">fn</span> <span class="identifier-function">heapify_tail_by</span>&lt;T, F&gt;(self: &amp;mut [T], start: <a href="/std/builtins/usize.html"><span class="identifier-type">usize</span></a>, f: F)<div class="protocol-bound">
F: <a href="/std/cmp/#item.CompareFunction"><span class="identifier-type">CompareFunction</span></a>&lt;T&gt;</div>
</h4>
<div class="source-link">
<a href="https://github.com/tibordp/alumina/blob/master/sysroot/std/collections/heap.alu#L596-L618"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Reorder the elements of a slice so they satisfy the (max) heap property.
</p><p>
This variant assumes that the slice before <code class="language-alumina">start</code> already satisfies the
heap property and sifts up the elements in the tail.
</p><p>
The method is adaptive and will perform a standard heapification if that
would be more efficient (if the tail is too long with respect to the existing
heap in the head).
</p><p>
</p>
<h3> Example</h3>
<p>
<pre class="with-playground-link"><code class="language-alumina">use std::collections::heap::{heapify_by, heapify_tail_by};
use std::cmp::compare;

let v = [3, 5, 1, 2, 9, 8];
v[0..4].heapify_by(compare::&lt;i32&gt;);
v[..].heapify_tail_by(4, compare::&lt;i32&gt;);

assert_eq!(v[0], 9); // max element
</code><a class="playground-link" target="_blank" href="https://play.alumina-lang.net/?q=fn%20main%28%29%20%7b%0a%20%20%20%20use%20std%3a%3acollections%3a%3aheap%3a%3a%7bheapify%5fby%2c%20heapify%5ftail%5fby%7d%3b%0a%20%20%20%20use%20std%3a%3acmp%3a%3acompare%3b%0a%20%20%20%20%0a%20%20%20%20let%20v%20%3d%20%5b3%2c%205%2c%201%2c%202%2c%209%2c%208%5d%3b%0a%20%20%20%20v%5b0%2e%2e4%5d%2eheapify%5fby%28compare%3a%3a%3ci32%3e%29%3b%0a%20%20%20%20v%5b%2e%2e%5d%2eheapify%5ftail%5fby%284%2c%20compare%3a%3a%3ci32%3e%29%3b%0a%20%20%20%20%0a%20%20%20%20assert%5feq%21%28v%5b0%5d%2c%209%29%3b%20%2f%2f%20max%20element%0a%7d%0a">Run this example</a></pre>
</p><p>
</p>
</div>
</li>
<li>
<div class="signature" id="item.sort_heap_by">
<h4>
<span class="keyword">fn</span> <span class="identifier-function">sort_heap_by</span>&lt;T, F&gt;(self: &amp;mut [T], f: F)<div class="protocol-bound">
F: <a href="/std/cmp/#item.CompareFunction"><span class="identifier-type">CompareFunction</span></a>&lt;T&gt;</div>
</h4>
<div class="source-link">
<a href="https://github.com/tibordp/alumina/blob/master/sysroot/std/collections/heap.alu#L637-L644"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Sorts an array satisfying the max heap property in ascending order.
</p><p>
</p>
<h3> Example</h3>
<p>
<pre class="with-playground-link"><code class="language-alumina">use std::collections::heap::{heapify_by, sort_heap_by};
use std::cmp::compare;

fn heapsort(slice: &amp;mut [i32]) {
    slice.heapify_by(compare::&lt;i32&gt;);
    slice.sort_heap_by(compare::&lt;i32&gt;);
}

let arr = [3, 5, 1, 2, 9, 8];
arr[..].heapsort();

assert_eq!(arr[..], &amp;[1, 2, 3, 5, 8, 9]);
</code><a class="playground-link" target="_blank" href="https://play.alumina-lang.net/?q=fn%20main%28%29%20%7b%0a%20%20%20%20use%20std%3a%3acollections%3a%3aheap%3a%3a%7bheapify%5fby%2c%20sort%5fheap%5fby%7d%3b%0a%20%20%20%20use%20std%3a%3acmp%3a%3acompare%3b%0a%20%20%20%20%0a%20%20%20%20fn%20heapsort%28slice%3a%20%26mut%20%5bi32%5d%29%20%7b%0a%20%20%20%20%20%20%20%20slice%2eheapify%5fby%28compare%3a%3a%3ci32%3e%29%3b%0a%20%20%20%20%20%20%20%20slice%2esort%5fheap%5fby%28compare%3a%3a%3ci32%3e%29%3b%0a%20%20%20%20%7d%0a%20%20%20%20%0a%20%20%20%20let%20arr%20%3d%20%5b3%2c%205%2c%201%2c%202%2c%209%2c%208%5d%3b%0a%20%20%20%20arr%5b%2e%2e%5d%2eheapsort%28%29%3b%0a%20%20%20%20%0a%20%20%20%20assert%5feq%21%28arr%5b%2e%2e%5d%2c%20%26%5b1%2c%202%2c%203%2c%205%2c%208%2c%209%5d%29%3b%0a%7d%0a">Run this example</a></pre>
</p><p>
</p>
</div>
</li>
<li>
<div class="signature" id="item.sift_up_by">
<h4>
<span class="keyword">fn</span> <span class="identifier-function">sift_up_by</span>&lt;T, F&gt;(self: &amp;mut [T], pos: <a href="/std/builtins/usize.html"><span class="identifier-type">usize</span></a>, f: F)<div class="protocol-bound">
F: <a href="/std/cmp/#item.CompareFunction"><span class="identifier-type">CompareFunction</span></a>&lt;T&gt;</div>
</h4>
<div class="source-link">
<a href="https://github.com/tibordp/alumina/blob/master/sysroot/std/collections/heap.alu#L664-L675"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Sifts an element up the heap until it reaches its correct position.
</p><p>
This is used e.g. to restore the heap property after appending an element to the
end of the heap.
</p><p>
</p>
<h3> Example</h3>
<p>
<pre class="with-playground-link"><code class="language-alumina">use std::collections::heap::{heapify_by, sift_up_by};
use std::cmp::compare;

let v = [1, 2, 3, 4, 5];
v[..].heapify_by(compare::&lt;i32&gt;);
assert_eq!(v[0], 5); // 5 is the max element

v[4] = 100;
v[..].sift_up_by(4, compare::&lt;i32&gt;);
assert_eq!(v[0], 100); // 100 is the new max element
</code><a class="playground-link" target="_blank" href="https://play.alumina-lang.net/?q=fn%20main%28%29%20%7b%0a%20%20%20%20use%20std%3a%3acollections%3a%3aheap%3a%3a%7bheapify%5fby%2c%20sift%5fup%5fby%7d%3b%0a%20%20%20%20use%20std%3a%3acmp%3a%3acompare%3b%0a%20%20%20%20%0a%20%20%20%20let%20v%20%3d%20%5b1%2c%202%2c%203%2c%204%2c%205%5d%3b%0a%20%20%20%20v%5b%2e%2e%5d%2eheapify%5fby%28compare%3a%3a%3ci32%3e%29%3b%0a%20%20%20%20assert%5feq%21%28v%5b0%5d%2c%205%29%3b%20%2f%2f%205%20is%20the%20max%20element%0a%20%20%20%20%0a%20%20%20%20v%5b4%5d%20%3d%20100%3b%0a%20%20%20%20v%5b%2e%2e%5d%2esift%5fup%5fby%284%2c%20compare%3a%3a%3ci32%3e%29%3b%0a%20%20%20%20assert%5feq%21%28v%5b0%5d%2c%20100%29%3b%20%2f%2f%20100%20is%20the%20new%20max%20element%0a%7d%0a">Run this example</a></pre>
</p><p>
</p>
</div>
</li>
<li>
<div class="signature" id="item.sift_down_by">
<h4>
<span class="keyword">fn</span> <span class="identifier-function">sift_down_by</span>&lt;T, F&gt;(self: &amp;mut [T], pos: <a href="/std/builtins/usize.html"><span class="identifier-type">usize</span></a>, f: F)<div class="protocol-bound">
F: <a href="/std/cmp/#item.CompareFunction"><span class="identifier-type">CompareFunction</span></a>&lt;T&gt;</div>
</h4>
<div class="source-link">
<a href="https://github.com/tibordp/alumina/blob/master/sysroot/std/collections/heap.alu#L697-L722"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Sifts an element down the heap until it reaches its correct position.
</p><p>
This is used e.g. to restore the heap property after removing the root element.
If replacing the root element with the last element of the heap, consider using
<a class="path-link" href="/std/collections/heap/#item.sift_down_to_bottom_by">sift_down_to_bottom_by</a> instead, as it can be more efficient when the element
should be close to the bottom of the heap.
</p><p>
</p>
<h3> Example</h3>
<p>
<pre class="with-playground-link"><code class="language-alumina">use std::collections::heap::{heapify_by, sift_down_by};
use std::cmp::compare;

let v = [1, 2, 3, 4, 5];
v[..].heapify_by(compare::&lt;i32&gt;);
assert_eq!(v[0], 5); // 5 is the max element

v[0] = 3;
v[..].sift_down_by(0, compare::&lt;i32&gt;);
assert_eq!(v[0], 4); // 4 is the new max element
</code><a class="playground-link" target="_blank" href="https://play.alumina-lang.net/?q=fn%20main%28%29%20%7b%0a%20%20%20%20use%20std%3a%3acollections%3a%3aheap%3a%3a%7bheapify%5fby%2c%20sift%5fdown%5fby%7d%3b%0a%20%20%20%20use%20std%3a%3acmp%3a%3acompare%3b%0a%20%20%20%20%0a%20%20%20%20let%20v%20%3d%20%5b1%2c%202%2c%203%2c%204%2c%205%5d%3b%0a%20%20%20%20v%5b%2e%2e%5d%2eheapify%5fby%28compare%3a%3a%3ci32%3e%29%3b%0a%20%20%20%20assert%5feq%21%28v%5b0%5d%2c%205%29%3b%20%2f%2f%205%20is%20the%20max%20element%0a%20%20%20%20%0a%20%20%20%20v%5b0%5d%20%3d%203%3b%0a%20%20%20%20v%5b%2e%2e%5d%2esift%5fdown%5fby%280%2c%20compare%3a%3a%3ci32%3e%29%3b%0a%20%20%20%20assert%5feq%21%28v%5b0%5d%2c%204%29%3b%20%2f%2f%204%20is%20the%20new%20max%20element%0a%7d%0a">Run this example</a></pre>
</p><p>
</p>
</div>
</li>
<li>
<div class="signature" id="item.sift_down_to_bottom_by">
<h4>
<span class="keyword">fn</span> <span class="identifier-function">sift_down_to_bottom_by</span>&lt;T, F&gt;(self: &amp;mut [T], pos: <a href="/std/builtins/usize.html"><span class="identifier-type">usize</span></a>, f: F)<div class="protocol-bound">
F: <a href="/std/cmp/#item.CompareFunction"><span class="identifier-type">CompareFunction</span></a>&lt;T&gt;</div>
</h4>
<div class="source-link">
<a href="https://github.com/tibordp/alumina/blob/master/sysroot/std/collections/heap.alu#L746-L767"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Sifts an element at index <code class="language-alumina">pos</code> to the bottom of the heap, then sifts it up until it reaches
its correct position.
</p><p>
This avoids extra comparisons on the way down and hence can be faster than just calling
<a class="path-link" href="/std/collections/heap/#item.sift_down_by">sift_down_by</a> until the element reaches the correct position when the element is known
to have to be near the bottom of the heap.
</p><p>
</p>
<h3> Example</h3>
<p>
<pre class="with-playground-link"><code class="language-alumina">use std::collections::heap::{heapify_by, sift_down_to_bottom_by};
use std::cmp::compare;
use std::mem::swap;

let v = [1, 2, 3, 4, 5].as_slice_mut();
v.heapify_by(compare::&lt;i32&gt;);

swap(&amp;v[0], &amp;v[4]);
v = v[..4]; // remove the last element

v.sift_down_to_bottom_by(0, compare::&lt;i32&gt;);
assert_eq!(v[0], 4); // 4 is the new max element
</code><a class="playground-link" target="_blank" href="https://play.alumina-lang.net/?q=fn%20main%28%29%20%7b%0a%20%20%20%20use%20std%3a%3acollections%3a%3aheap%3a%3a%7bheapify%5fby%2c%20sift%5fdown%5fto%5fbottom%5fby%7d%3b%0a%20%20%20%20use%20std%3a%3acmp%3a%3acompare%3b%0a%20%20%20%20use%20std%3a%3amem%3a%3aswap%3b%0a%20%20%20%20%0a%20%20%20%20let%20v%20%3d%20%5b1%2c%202%2c%203%2c%204%2c%205%5d%2eas%5fslice%5fmut%28%29%3b%0a%20%20%20%20v%2eheapify%5fby%28compare%3a%3a%3ci32%3e%29%3b%0a%20%20%20%20%0a%20%20%20%20swap%28%26v%5b0%5d%2c%20%26v%5b4%5d%29%3b%0a%20%20%20%20v%20%3d%20v%5b%2e%2e4%5d%3b%20%2f%2f%20remove%20the%20last%20element%0a%20%20%20%20%0a%20%20%20%20v%2esift%5fdown%5fto%5fbottom%5fby%280%2c%20compare%3a%3a%3ci32%3e%29%3b%0a%20%20%20%20assert%5feq%21%28v%5b0%5d%2c%204%29%3b%20%2f%2f%204%20is%20the%20new%20max%20element%0a%7d%0a">Run this example</a></pre>
</p><p>
</p>
</div>
</li>
</ul>
</main>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/prism.min.js" integrity="sha512-RDQSW3KoqJMiX0L/UBgwBmH1EmRYp8LBOiLaA8rBHIy+7OGP/7Gxg8vbt8wG4ZYd29P0Fnoq6+LOytCqx3cyoQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="/static/prism-alumina.js"></script>
</body>
</html>

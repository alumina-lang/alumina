<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>std::runtime::backtrace - Alumina Docs</title>
<link rel="stylesheet" href="/static/styles.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content=" Bindings to `libbacktrace`" />
<link rel="apple-touch-icon" sizes="180x180" href="/static/apple-touch-icon.png" />
<link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png" />
<link rel="manifest" href="/static/manifest.json" />
<link rel="mask-icon" href="/static/safari-pinned-tab.svg" color="#5bbad5" />
<link rel="shortcut icon" href="/static/favicon.ico" />
<link rel="canonical" href="https://docs.alumina-lang.net/std/runtime/backtrace/" />
<meta name="msapplication-TileColor" content="#da532c" />
<meta name="msapplication-config" content="/static/browserconfig.xml" />
<meta name="description" content="Documentation for the Alumina standard library" />
<script src="/static/site.js"></script>
<script src="/search_index.js" async></script>
<link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400;500&family=Source+Code+Pro:wght@400;600&family=Source+Serif+4:opsz,wght@8..60,400;8..60,700&display=swap" rel="stylesheet">
</head>
<body>
<nav>
<a href="/">
<img width="100px" height="100px" class="logo" src="/static/logo.svg" alt="Alumina Docs">
</a>
<h1><a class="breadcrumbs" href="/std/">std</a>::<a class="breadcrumbs" href="/std/runtime/">runtime</a>::<a class="breadcrumbs" href="/std/runtime/backtrace/">backtrace</a></h1>
</h1>
<h2>Structs</h2>
<ul>
<li>
<a href="/std/runtime/backtrace/BacktraceState.html">BacktraceState</a>
</li>
</ul>
<h2>Functions</h2>
<ul>
<li>
<a href="/std/runtime/backtrace/#item.backtrace_create_state">backtrace_create_state</a>
</li>
<li>
<a href="/std/runtime/backtrace/#item.backtrace_full">backtrace_full</a>
</li>
</ul>
<h2>Types</h2>
<ul>
<li>
<a href="/std/runtime/backtrace/#item.BacktraceErrorCallback">BacktraceErrorCallback</a>
</li>
<li>
<a href="/std/runtime/backtrace/#item.BacktraceFullCallback">BacktraceFullCallback</a>
</li>
</ul>
</nav>
<div class="main-container">
<div id="search-container">
<a class="mobile-only" href="/">
<img width="40px" height="40px" class="logo" src="/static/logo.svg" alt="Alumina Docs">
</a>
<input id="search-input" class="search-input" autocomplete="off" spellcheck="false" placeholder="Search the documentation..." type="search"></input>
</div>
<div id="search-results"></div>
<main id="main-content">
<div class="main-title"><h1>Module <a class="breadcrumbs" href="/std/">std</a>::<a class="breadcrumbs" href="/std/runtime/">runtime</a>::<a class="breadcrumbs" href="/std/runtime/backtrace/">backtrace</a></h1>
</h1>
</div>
<p>
Bindings to <code class="language-alumina">libbacktrace</code>
</p><p>
</p>
<h2 id="Struct">Structs</h2>
<div class="item-short-table">
<div class="row" id="item.BacktraceState">
<div class="cell-name">
<a href="/std/runtime/backtrace/BacktraceState.html">BacktraceState</a>
</div>
<div class="cell-doc">The backtrace state.
This struct is intentionally not defined in the public interface.
</div>
</div>
</div>
<h2 id="Function">Functions</h2>
<ul>
<li>
<div class="signature" id="item.backtrace_create_state">
<h4>
<span class="keyword">extern</span> <span class="literal-string">"C"</span> <span class="keyword">fn</span> <span class="identifier-function">backtrace_create_state</span>(filename: &amp;c_char, threaded: c_int, error: <a href="/std/runtime/backtrace/#item.BacktraceErrorCallback"><span class="identifier-type">BacktraceErrorCallback</span></a>, data: &amp;<span class="keyword">mut</span> <a href="/std/builtins/void.html"><span class="identifier-type">void</span></a>) -> &amp;<span class="keyword">mut</span> <a href="/std/runtime/backtrace/BacktraceState.html"><span class="identifier-type">BacktraceState</span></a></h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/runtime/backtrace.alu#L82-L87"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Create state information for the backtrace routines.
</p><p>
This must be called before any of the other routines, and its return value must
be passed to all of the other routines.  <code class="language-alumina">filename</code> is the path name
of the executable file; if it is <code class="language-alumina">null</code> the library will try
system-specific path names.  If not <code class="language-alumina">null</code>, <code class="language-alumina">filename</code> must point to a
permanent buffer.  If <code class="language-alumina">threaded</code> is non-zero the state may be
accessed by multiple threads simultaneously, and the library will
use appropriate atomic operations.  If <code class="language-alumina">threaded</code> is zero the state
may only be accessed by one thread at a time.  This returns a state
pointer on success, <code class="language-alumina">null</code> on error.  If an error occurs, this will
call the <code class="language-alumina">error_callback</code> routine.
</p><p>
Calling this function allocates resources that cannot be freed.
There is no <code class="language-alumina">backtrace_free_state</code> function.  The state is used to
cache information that is expensive to recompute.  Programs are
expected to call this function at most once and to save the return
value for all later calls to backtrace functions.
</p><p>
</p>
</div>
</li>
<li>
<div class="signature" id="item.backtrace_full">
<h4>
<span class="keyword">extern</span> <span class="literal-string">"C"</span> <span class="keyword">fn</span> <span class="identifier-function">backtrace_full</span>(state: &amp;<span class="keyword">mut</span> <a href="/std/runtime/backtrace/BacktraceState.html"><span class="identifier-type">BacktraceState</span></a>, skip: c_int, callback: <a href="/std/runtime/backtrace/#item.BacktraceFullCallback"><span class="identifier-type">BacktraceFullCallback</span></a>, error: <a href="/std/runtime/backtrace/#item.BacktraceErrorCallback"><span class="identifier-type">BacktraceErrorCallback</span></a>, data: &amp;<span class="keyword">mut</span> <a href="/std/builtins/void.html"><span class="identifier-type">void</span></a>) -> c_int</h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/runtime/backtrace.alu#L117-L123"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Get a full stack backtrace.
</p><p>
<code class="language-alumina">skip</code> is the number of frames to skip; passing 0 will start the trace with the
function calling backtrace_full.  <code class="language-alumina">data</code> is passed to the callback routine.
If any call to <code class="language-alumina">callback</code> returns a non-zero value, the stack backtrace
stops, and backtrace returns that value; this may be used to limit
the number of stack frames desired.  If all calls to <code class="language-alumina">callback</code>
return 0, backtrace returns 0.  The <a class="path-link" href="/std/runtime/backtrace/#item.backtrace_full">backtrace_full</a> function will
make at least one call to either <code class="language-alumina">callback</code> or <code class="language-alumina">error_callback</code>.  This
function requires debug info for the executable.
</p><p>
</p>
</div>
</li>
</ul>
<h2 id="Type">Types</h2>
<ul>
<li>
<div class="signature" id="item.BacktraceErrorCallback">
<h4>
<span class="keyword">type</span> <span class="identifier-type">BacktraceErrorCallback</span> = <span class="keyword">fn</span>(&amp;<span class="keyword">mut</span> <a href="/std/builtins/void.html"><span class="identifier-type">void</span></a>, &amp;c_char, c_int)</h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/runtime/backtrace.alu#L59-L62"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
The type of the error callback argument to backtrace functions.
</p><p>
This function, if not <code class="language-alumina">null</code>, will be called for certain error cases.
The <code class="language-alumina">data</code> argument is passed to the function that calls this one.
The MSG argument is an error message.  The <code class="language-alumina">errnum</code> argument, if
greater than 0, holds an errno value.  The MSG buffer may become
invalid after this function returns.
</p><p>
As a special case, the <code class="language-alumina">errnum</code> argument will be passed as -1 if no
debug info can be found for the executable, or if the debug info
exists but has an unsupported version, but the function requires
debug info (e.g., <a class="path-link" href="/std/runtime/backtrace/#item.backtrace_full">backtrace_full</a>, <code class="language-alumina">backtrace_pcinfo</code>).  The MSG in
this case will be something along the lines of "no debug info".
Similarly, <code class="language-alumina">errnum</code> will be passed as -1 if there is no symbol table,
but the function requires a symbol table (e.g., <code class="language-alumina">backtrace_syminfo</code>).
This may be used as a signal that some other approach should be
tried.
</p><p>
</p>
</div>
</li>
<li>
<div class="signature" id="item.BacktraceFullCallback">
<h4>
<span class="keyword">type</span> <span class="identifier-type">BacktraceFullCallback</span> = <span class="keyword">fn</span>(&amp;<span class="keyword">mut</span> <a href="/std/builtins/void.html"><span class="identifier-type">void</span></a>, <a href="/std/builtins/usize.html"><span class="identifier-type">usize</span></a>, &amp;c_char, c_int, &amp;c_char) -> c_int</h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/runtime/backtrace.alu#L99-L105"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
The type of the callback argument to the backtrace_full function.
</p><p>
<code class="language-alumina">data</code> is the argument passed to backtrace_full.  <code class="language-alumina">pc</code> is the program
counter.  <code class="language-alumina">filename</code> is the name of the file containing <code class="language-alumina">pc</code>, or <code class="language-alumina">null</code>
if not available.  <code class="language-alumina">lineno</code> is the line number in <code class="language-alumina">filename</code> containing
<code class="language-alumina">pc</code>, or 0 if not available.  <code class="language-alumina">function</code> is the name of the function
containing <code class="language-alumina">pc</code>, or <code class="language-alumina">null</code> if not available.  This should return 0 to
continuing tracing.  The <code class="language-alumina">filename</code> and <code class="language-alumina">function</code> buffers may become
invalid after this function returns.
</p><p>
</p>
</div>
</li>
</ul>
</main>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/prism.min.js" integrity="sha512-RDQSW3KoqJMiX0L/UBgwBmH1EmRYp8LBOiLaA8rBHIy+7OGP/7Gxg8vbt8wG4ZYd29P0Fnoq6+LOytCqx3cyoQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="/static/prism-alumina.js"></script>
</body>
</html>

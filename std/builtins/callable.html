<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>std::builtins::callable - Alumina Docs</title>
<link rel="stylesheet" href="/static/styles.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content=" Method implementations for callable objects (named functions, function pointers, closures)" />
<link rel="apple-touch-icon" sizes="180x180" href="/static/apple-touch-icon.png" />
<link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png" />
<link rel="manifest" href="/static/manifest.json" />
<link rel="mask-icon" href="/static/safari-pinned-tab.svg" color="#5bbad5" />
<link rel="shortcut icon" href="/static/favicon.ico" />
<link rel="canonical" href="https://docs.alumina-lang.net/std/builtins/callable.html" />
<meta name="msapplication-TileColor" content="#da532c" />
<meta name="msapplication-config" content="/static/browserconfig.xml" />
<meta name="description" content="Documentation for the Alumina standard library" />
<script src="/static/site.js"></script>
<script src="/search_index.js" async></script>
<link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400;500&family=Source+Code+Pro:wght@400;600&family=Source+Serif+4:opsz,wght@8..60,400;8..60,700&display=swap" rel="stylesheet">
</head>
<body>
<nav>
<a href="/">
<img width="100px" height="100px" class="logo" src="/static/logo.svg" alt="Alumina Docs">
</a>
<h1><a class="breadcrumbs" href="/std/">std</a>::<a class="breadcrumbs" href="/std/builtins/">builtins</a>::<a class="breadcrumbs" href="/std/builtins/callable.html">callable</a></h1>
</h1>
<h2>Methods</h2>
<ul>
<li>
<a href="/std/builtins/callable.html#item.invoke">invoke</a>
</li>
<li>
<a href="/std/builtins/callable.html#item.as_callback">as_callback</a>
</li>
</ul>
</nav>
<div class="main-container">
<div id="search-container">
<a class="mobile-only" href="/">
<img width="40px" height="40px" class="logo" src="/static/logo.svg" alt="Alumina Docs">
</a>
<input id="search-input" class="search-input" autocomplete="off" spellcheck="false" placeholder="Search the documentation..." type="search"></input>
</div>
<div id="search-results"></div>
<main id="main-content">
<div class="main-title"><h1>Builtin type <a class="breadcrumbs" href="/std/">std</a>::<a class="breadcrumbs" href="/std/builtins/">builtins</a>::<a class="breadcrumbs" href="/std/builtins/callable.html">callable</a></h1>
</h1>
</div>
<p>
Method implementations for callable objects (named functions, function pointers, closures)
</p><p>
</p>
<h2 id="Method">Methods</h2>
<div class="signature impl-header"><h3>
<span class="keyword">impl</span> <span class="identifier-type">callable</span> { ... }</h3></div>
<ul>
<li>
<div class="signature" id="item.invoke">
<h4>
<span class="keyword">fn</span> <span class="identifier-function">invoke</span>&lt;Args, Ret, F&gt;(f: F, args: Args) -> Ret<div class="protocol-bound">
F: <a href="/std/builtins/Callable.html"><span class="identifier-type">Callable</span></a>&lt;Args, Ret&gt;</div>
</h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/builtins/mod.alu#L1247-L1250"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Call a function with arguments passed as a tuple.
</p><p>
</p>
<h3> Example</h3>
<p>
<pre class="with-playground-link"><code class="language-alumina">fn add(a: i32, b: i32) -&gt; i32 {
    a + b
}

let args = (1, 2);
let result = add.invoke(args);

assert_eq!(result, 3);
</code><a class="playground-link" target="_blank" href="https://play.alumina-lang.net/?q=fn%20main%28%29%20%7b%0a%20%20%20%20fn%20add%28a%3a%20i32%2c%20b%3a%20i32%29%20%2d%3e%20i32%20%7b%0a%20%20%20%20%20%20%20%20a%20%2b%20b%0a%20%20%20%20%7d%0a%20%20%20%20%0a%20%20%20%20let%20args%20%3d%20%281%2c%202%29%3b%0a%20%20%20%20let%20result%20%3d%20add%2einvoke%28args%29%3b%0a%20%20%20%20%0a%20%20%20%20assert%5feq%21%28result%2c%203%29%3b%0a%7d%0a">Run this example</a></pre>
</p><p>
</p>
</div>
</li>
<li>
<div class="signature" id="item.as_callback">
<h4>
<span class="keyword">fn</span> <span class="identifier-function">as_callback</span>&lt;Args, Ret, F&gt;(f: &amp;mut F) -> (&amp;mut <a href="/std/builtins/void.html"><span class="identifier-type">void</span></a>, <a href="/std/builtins/#item.callback_of"><span class="identifier-type">callback_of</span></a>&lt;Args, Ret&gt;)<div class="protocol-bound">
F: <a href="/std/builtins/Closure.html"><span class="identifier-type">Closure</span></a> + <a href="/std/builtins/Callable.html"><span class="identifier-type">Callable</span></a>&lt;Args, Ret&gt;</div>
</h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/builtins/mod.alu#L1289-L1299"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Converts a pointer to closure to a C-style state and function pointer pair.
</p><p>
This function is used to pass closures to C functions that expect a function pointer and a
state pointer, that is passed as the first argument to the function when the callback is
called.
</p><p>
</p>
<h3> Example</h3>
<p>
<pre class="with-playground-link"><code class="language-alumina">use libc::{c_int, c_char};

extern "C" fn sqlite3_exec(
    db: &amp;mut sqlite3,
    sql: &amp;c_char,
    callback: fn(&amp;mut void, c_int, &amp;mut &amp;mut c_char, &amp;mut &amp;mut c_char) -&gt; c_int,
    state: &amp;mut void, // тое
    errmsg: &amp;mut &amp;mut c_char,
) -&gt; libc::c_int;

let db = /* ... */;
let file = File::open(/* ... */);
defer file.close();

// Prints the rows of a table to a file that's captured by the closure.
let print = |&amp;file, num_cols: c_int, values: &amp;mut &amp;mut c_char, _: &amp;mut &amp;mut c_char| {
    /// ... print values to file ...
    0
};

let (state, callback) = print.as_callback();
sqlite3_exec(
    &amp;mut db,
    "SELECT * FROM users\0".as_ptr() as &amp;c_char,
    callback,
    state,
    null
);
</code><a class="playground-link" target="_blank" href="https://play.alumina-lang.net/?q=fn%20main%28%29%20%7b%0a%20%20%20%20use%20libc%3a%3a%7bc%5fint%2c%20c%5fchar%7d%3b%0a%20%20%20%20%0a%20%20%20%20extern%20%22C%22%20fn%20sqlite3%5fexec%28%0a%20%20%20%20%20%20%20%20db%3a%20%26mut%20sqlite3%2c%0a%20%20%20%20%20%20%20%20sql%3a%20%26c%5fchar%2c%0a%20%20%20%20%20%20%20%20callback%3a%20fn%28%26mut%20void%2c%20c%5fint%2c%20%26mut%20%26mut%20c%5fchar%2c%20%26mut%20%26mut%20c%5fchar%29%20%2d%3e%20c%5fint%2c%0a%20%20%20%20%20%20%20%20state%3a%20%26mut%20void%2c%20%2f%2f%20%e2%ae%a5%0a%20%20%20%20%20%20%20%20errmsg%3a%20%26mut%20%26mut%20c%5fchar%2c%0a%20%20%20%20%29%20%2d%3e%20libc%3a%3ac%5fint%3b%0a%20%20%20%20%0a%20%20%20%20let%20db%20%3d%20%2f%2a%20%2e%2e%2e%20%2a%2f%3b%0a%20%20%20%20let%20file%20%3d%20File%3a%3aopen%28%2f%2a%20%2e%2e%2e%20%2a%2f%29%3b%0a%20%20%20%20defer%20file%2eclose%28%29%3b%0a%20%20%20%20%0a%20%20%20%20%2f%2f%20Prints%20the%20rows%20of%20a%20table%20to%20a%20file%20that%27s%20captured%20by%20the%20closure%2e%0a%20%20%20%20let%20print%20%3d%20%7c%26file%2c%20num%5fcols%3a%20c%5fint%2c%20values%3a%20%26mut%20%26mut%20c%5fchar%2c%20%5f%3a%20%26mut%20%26mut%20c%5fchar%7c%20%7b%0a%20%20%20%20%20%20%20%20%2f%2f%2f%20%2e%2e%2e%20print%20values%20to%20file%20%2e%2e%2e%0a%20%20%20%20%20%20%20%200%0a%20%20%20%20%7d%3b%0a%20%20%20%20%0a%20%20%20%20let%20%28state%2c%20callback%29%20%3d%20print%2eas%5fcallback%28%29%3b%0a%20%20%20%20sqlite3%5fexec%28%0a%20%20%20%20%20%20%20%20%26mut%20db%2c%0a%20%20%20%20%20%20%20%20%22SELECT%20%2a%20FROM%20users%5c0%22%2eas%5fptr%28%29%20as%20%26c%5fchar%2c%0a%20%20%20%20%20%20%20%20callback%2c%0a%20%20%20%20%20%20%20%20state%2c%0a%20%20%20%20%20%20%20%20null%0a%20%20%20%20%29%3b%0a%7d%0a">Run this example</a></pre>
</p><p>
</p>
</div>
</li>
</ul>
</main>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/prism.min.js" integrity="sha512-RDQSW3KoqJMiX0L/UBgwBmH1EmRYp8LBOiLaA8rBHIy+7OGP/7Gxg8vbt8wG4ZYd29P0Fnoq6+LOytCqx3cyoQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="/static/prism-alumina.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>std::string::unicode - Alumina Docs</title>
<link rel="stylesheet" href="/static/styles.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content=" Utilities for handling Unicode text" />
<link rel="apple-touch-icon" sizes="180x180" href="/static/apple-touch-icon.png" />
<link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png" />
<link rel="manifest" href="/static/manifest.json" />
<link rel="mask-icon" href="/static/safari-pinned-tab.svg" color="#5bbad5" />
<link rel="shortcut icon" href="/static/favicon.ico" />
<link rel="canonical" href="https://docs.alumina-lang.net/std/string/unicode/" />
<meta name="msapplication-TileColor" content="#da532c" />
<meta name="msapplication-config" content="/static/browserconfig.xml" />
<meta name="description" content="Documentation for the Alumina standard library" />
<script src="/static/site.js"></script>
<script src="/search_index.js" async></script>
<link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400;500&family=Source+Code+Pro:wght@400;600&family=Source+Serif+4:opsz,wght@8..60,400;8..60,700&display=swap" rel="stylesheet">
</head>
<body>
<nav>
<a href="/">
<img width="100px" height="100px" class="logo" src="/static/logo.svg" alt="Alumina Docs">
</a>
<h1><a class="breadcrumbs" href="/std/">std</a>::<a class="breadcrumbs" href="/std/string/">string</a>::<a class="breadcrumbs" href="/std/string/unicode/">unicode</a></h1>
</h1>
<h2>Structs</h2>
<ul>
<li>
<a href="/std/string/unicode/CharsIterator.html">CharsIterator</a>
</li>
<li>
<a href="/std/string/unicode/CharIndicesIterator.html">CharIndicesIterator</a>
</li>
<li>
<a href="/std/string/unicode/Utf8Adapter.html">Utf8Adapter</a>
</li>
</ul>
<h2>Functions</h2>
<ul>
<li>
<a href="/std/string/unicode/#item.len_utf8">len_utf8</a>
</li>
<li>
<a href="/std/string/unicode/#item.len_utf16">len_utf16</a>
</li>
<li>
<a href="/std/string/unicode/#item.is_scalar_value">is_scalar_value</a>
</li>
<li>
<a href="/std/string/unicode/#item.is_utf16_surrogate">is_utf16_surrogate</a>
</li>
<li>
<a href="/std/string/unicode/#item.encode_utf8">encode_utf8</a>
</li>
<li>
<a href="/std/string/unicode/#item.encode_utf16">encode_utf16</a>
</li>
<li>
<a href="/std/string/unicode/#item.decode_utf8">decode_utf8</a>
</li>
<li>
<a href="/std/string/unicode/#item.decode_utf8_unchecked">decode_utf8_unchecked</a>
</li>
<li>
<a href="/std/string/unicode/#item.decode_utf16">decode_utf16</a>
</li>
<li>
<a href="/std/string/unicode/#item.chars">chars</a>
</li>
<li>
<a href="/std/string/unicode/#item.char_indices">char_indices</a>
</li>
<li>
<a href="/std/string/unicode/#item.utf8_chars">utf8_chars</a>
</li>
</ul>
<h2>Enums</h2>
<ul>
<li>
<a href="/std/string/unicode/Error.html">Error</a>
</li>
</ul>
<h2>Consts</h2>
<ul>
<li>
<a href="/std/string/unicode/#item.TAG_CONT">TAG_CONT</a>
</li>
<li>
<a href="/std/string/unicode/#item.TAG_TWO_B">TAG_TWO_B</a>
</li>
<li>
<a href="/std/string/unicode/#item.TAG_THREE_B">TAG_THREE_B</a>
</li>
<li>
<a href="/std/string/unicode/#item.TAG_FOUR_B">TAG_FOUR_B</a>
</li>
<li>
<a href="/std/string/unicode/#item.MAX_ONE_B">MAX_ONE_B</a>
</li>
<li>
<a href="/std/string/unicode/#item.MAX_TWO_B">MAX_TWO_B</a>
</li>
<li>
<a href="/std/string/unicode/#item.MAX_THREE_B">MAX_THREE_B</a>
</li>
</ul>
</nav>
<div class="main-container">
<div id="search-container">
<a class="mobile-only" href="/">
<img width="40px" height="40px" class="logo" src="/static/logo.svg" alt="Alumina Docs">
</a>
<input id="search-input" class="search-input" autocomplete="off" spellcheck="false" placeholder="Search the documentation..." type="search"></input>
</div>
<div id="search-results"></div>
<main id="main-content">
<div class="main-title"><h1>Module <a class="breadcrumbs" href="/std/">std</a>::<a class="breadcrumbs" href="/std/string/">string</a>::<a class="breadcrumbs" href="/std/string/unicode/">unicode</a></h1>
</h1>
</div>
<p>
Utilities for handling Unicode text
</p><p>
</p>
<h2 id="Struct">Structs</h2>
<div class="item-short-table">
<div class="row" id="item.CharsIterator">
<div class="cell-name">
<a href="/std/string/unicode/CharsIterator.html">CharsIterator</a>
</div>
<div class="cell-doc">Iterator over Unicode scalar values in a UTF-8 string.
</div>
</div>
<div class="row" id="item.CharIndicesIterator">
<div class="cell-name">
<a href="/std/string/unicode/CharIndicesIterator.html">CharIndicesIterator</a>
</div>
<div class="cell-doc">Iterator over indices of Unicode scalar values in a UTF-8 string.
</div>
</div>
<div class="row" id="item.Utf8Adapter">
<div class="cell-name">
<a href="/std/string/unicode/Utf8Adapter.html">Utf8Adapter</a>
</div>
<div class="cell-doc"></div>
</div>
</div>
<h2 id="Function">Functions</h2>
<ul>
<li>
<div class="signature" id="item.len_utf8">
<h4>
<span class="keyword">fn</span> <span class="identifier-function">len_utf8</span>(code: <a href="/std/builtins/u32.html"><span class="identifier-type">u32</span></a>) -> <a href="/std/builtins/usize.html"><span class="identifier-type">usize</span></a></h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/string/unicode.alu#L51-L61"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Returns the number of bytes needed to encode the given Unicode
code point as UTF-8.
</p><p>
</p>
</div>
</li>
<li>
<div class="signature" id="item.len_utf16">
<h4>
<span class="keyword">fn</span> <span class="identifier-function">len_utf16</span>(code: <a href="/std/builtins/u32.html"><span class="identifier-type">u32</span></a>) -> <a href="/std/builtins/usize.html"><span class="identifier-type">usize</span></a></h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/string/unicode.alu#L65-L71"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Returns the number of 16-bit values needed to encode the
given Unicode code point as UTF-16.
</p><p>
</p>
</div>
</li>
<li>
<div class="signature" id="item.is_scalar_value">
<h4>
<span class="keyword">fn</span> <span class="identifier-function">is_scalar_value</span>(code: <a href="/std/builtins/u32.html"><span class="identifier-type">u32</span></a>) -> <a href="/std/builtins/bool.html"><span class="identifier-type">bool</span></a></h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/string/unicode.alu#L87-L90"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Returns <code class="language-alumina">true</code> if the Unicode code point is a valid
Unicode scalar value.
</p><p>
A Unicode scalar value is a Unicode code point in the range
<code class="language-alumina">U+0000..U+D7FF</code> or <code class="language-alumina">U+E000..U+10FFFF</code>.
</p><p>
</p>
<h3> Example</h3>
<p>
<pre class="with-playground-link"><code class="language-alumina">use std::string::unicode::is_scalar_value;

assert!(is_scalar_value(0x61));
assert!(!is_scalar_value(0xD800));
assert!(!is_scalar_value(0x1FFFFF));
</code><a class="playground-link" target="_blank" href="https://play.alumina-lang.net/?q=fn%20main%28%29%20%7b%0a%20%20%20%20use%20std%3a%3astring%3a%3aunicode%3a%3ais%5fscalar%5fvalue%3b%0a%20%20%20%20%0a%20%20%20%20assert%21%28is%5fscalar%5fvalue%280x61%29%29%3b%0a%20%20%20%20assert%21%28%21is%5fscalar%5fvalue%280xD800%29%29%3b%0a%20%20%20%20assert%21%28%21is%5fscalar%5fvalue%280x1FFFFF%29%29%3b%0a%7d%0a">Run this example</a></pre>
</p><p>
</p>
</div>
</li>
<li>
<div class="signature" id="item.is_utf16_surrogate">
<h4>
<span class="keyword">fn</span> <span class="identifier-function">is_utf16_surrogate</span>(code: <a href="/std/builtins/u16.html"><span class="identifier-type">u16</span></a>) -> <a href="/std/builtins/bool.html"><span class="identifier-type">bool</span></a></h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/string/unicode.alu#L94-L97"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Returns <code class="language-alumina">true</code> if the 16-bit value is a surrogate (either
high or low).
</p><p>
</p>
</div>
</li>
<li>
<div class="signature" id="item.encode_utf8">
<h4>
<span class="keyword">fn</span> <span class="identifier-function">encode_utf8</span>(code: <a href="/std/builtins/u32.html"><span class="identifier-type">u32</span></a>, dst: &amp;mut [<a href="/std/builtins/u8.html"><span class="identifier-type">u8</span></a>]) -> <a href="/std/result/Result.html"><span class="identifier-type">Result</span></a>&lt;<a href="/std/builtins/usize.html"><span class="identifier-type">usize</span></a>, <a href="/std/string/unicode/Error.html"><span class="identifier-type">Error</span></a>&gt;</h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/string/unicode.alu#L114-L148"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Encodes the given Unicode code point as UTF-8 into the given
byte buffer. Returns the number of bytes written.
</p><p>
Returns an error if the buffer is too small or if the code
point is not a valid Unicode scalar value.
</p><p>
</p>
<h3> Example</h3>
<p>
<pre class="with-playground-link"><code class="language-alumina">use std::string::unicode::encode_utf8;

let buf: [u8; 10];
let size = encode_utf8(0x1F4A9, &amp;buf).unwrap();

assert_eq!(buf[..size] as &amp;[u8], "💩");
</code><a class="playground-link" target="_blank" href="https://play.alumina-lang.net/?q=fn%20main%28%29%20%7b%0a%20%20%20%20use%20std%3a%3astring%3a%3aunicode%3a%3aencode%5futf8%3b%0a%20%20%20%20%0a%20%20%20%20let%20buf%3a%20%5bu8%3b%2010%5d%3b%0a%20%20%20%20let%20size%20%3d%20encode%5futf8%280x1F4A9%2c%20%26buf%29%2eunwrap%28%29%3b%0a%20%20%20%20%0a%20%20%20%20assert%5feq%21%28buf%5b%2e%2esize%5d%20as%20%26%5bu8%5d%2c%20%22%f0%9f%92%a9%22%29%3b%0a%7d%0a">Run this example</a></pre>
</p><p>
</p>
</div>
</li>
<li>
<div class="signature" id="item.encode_utf16">
<h4>
<span class="keyword">fn</span> <span class="identifier-function">encode_utf16</span>(code: <a href="/std/builtins/u32.html"><span class="identifier-type">u32</span></a>, dst: &amp;mut [<a href="/std/builtins/u16.html"><span class="identifier-type">u16</span></a>]) -> <a href="/std/result/Result.html"><span class="identifier-type">Result</span></a>&lt;<a href="/std/builtins/usize.html"><span class="identifier-type">usize</span></a>, <a href="/std/string/unicode/Error.html"><span class="identifier-type">Error</span></a>&gt;</h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/string/unicode.alu#L168-L188"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Encodes the given Unicode code point as UTF-16 into the given
16-bit value buffer. Returns the number of values written.
</p><p>
Returns an error if the buffer is too small or if the code
point is not a valid Unicode scalar value.
</p><p>
</p>
<h3> Example</h3>
<p>
<pre class="with-playground-link"><code class="language-alumina">use std::string::unicode::encode_utf16;

let buf: [u16; 10];
let size = encode_utf16(0x1F4A9, &amp;buf).unwrap();

assert_eq!(size, 2);
assert_eq!(buf[0], 0xD83D);
assert_eq!(buf[1], 0xDCA9);
</code><a class="playground-link" target="_blank" href="https://play.alumina-lang.net/?q=fn%20main%28%29%20%7b%0a%20%20%20%20use%20std%3a%3astring%3a%3aunicode%3a%3aencode%5futf16%3b%0a%20%20%20%20%0a%20%20%20%20let%20buf%3a%20%5bu16%3b%2010%5d%3b%0a%20%20%20%20let%20size%20%3d%20encode%5futf16%280x1F4A9%2c%20%26buf%29%2eunwrap%28%29%3b%0a%20%20%20%20%0a%20%20%20%20assert%5feq%21%28size%2c%202%29%3b%0a%20%20%20%20assert%5feq%21%28buf%5b0%5d%2c%200xD83D%29%3b%0a%20%20%20%20assert%5feq%21%28buf%5b1%5d%2c%200xDCA9%29%3b%0a%7d%0a">Run this example</a></pre>
</p><p>
</p>
</div>
</li>
<li>
<div class="signature" id="item.decode_utf8">
<h4>
<span class="keyword">fn</span> <span class="identifier-function">decode_utf8</span>(src: &amp;[<a href="/std/builtins/u8.html"><span class="identifier-type">u8</span></a>]) -> <a href="/std/result/Result.html"><span class="identifier-type">Result</span></a>&lt;(<a href="/std/builtins/u32.html"><span class="identifier-type">u32</span></a>, <a href="/std/builtins/usize.html"><span class="identifier-type">usize</span></a>), <a href="/std/string/unicode/Error.html"><span class="identifier-type">Error</span></a>&gt;</h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/string/unicode.alu#L216-L268"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Decodes a single UTF-8 code point from the given byte slice.
</p><p>
Returns the code point and the number of bytes read. This method ensures
validates that the returned code point is a valid Unicode scalar value and
it that it is encoded with the minimum number of bytes.
</p><p>
See also <a class="path-link" href="/std/string/unicode/#item.decode_utf8_unchecked">decode_utf8_unchecked</a> which does not perform any validation, but
can be faster.
</p><p>
</p>
<h3> Examples</h3>
<p>
<pre class="with-playground-link"><code class="language-alumina">use std::string::unicode::decode_utf8;

let s = "😊";
let (code, len) = decode_utf8(s).unwrap();

assert_eq!(code, 0x1F60A);
assert_eq!(len, 4);
</code><a class="playground-link" target="_blank" href="https://play.alumina-lang.net/?q=fn%20main%28%29%20%7b%0a%20%20%20%20use%20std%3a%3astring%3a%3aunicode%3a%3adecode%5futf8%3b%0a%20%20%20%20%0a%20%20%20%20let%20s%20%3d%20%22%f0%9f%98%8a%22%3b%0a%20%20%20%20let%20%28code%2c%20len%29%20%3d%20decode%5futf8%28s%29%2eunwrap%28%29%3b%0a%20%20%20%20%0a%20%20%20%20assert%5feq%21%28code%2c%200x1F60A%29%3b%0a%20%20%20%20assert%5feq%21%28len%2c%204%29%3b%0a%7d%0a">Run this example</a></pre>
</p><p>
<pre class="with-playground-link panics"><code class="language-alumina">use std::string::unicode::decode_utf8;

let s = "\xed\xa0\x80"; // pseudo-UTF8 representing U+D800 surrogate
decode_utf8(s).unwrap(); // panics
</code><a class="playground-link" target="_blank" href="https://play.alumina-lang.net/?q=fn%20main%28%29%20%7b%0a%20%20%20%20use%20std%3a%3astring%3a%3aunicode%3a%3adecode%5futf8%3b%0a%20%20%20%20%0a%20%20%20%20let%20s%20%3d%20%22%5cxed%5cxa0%5cx80%22%3b%20%2f%2f%20pseudo%2dUTF8%20representing%20U%2bD800%20surrogate%0a%20%20%20%20decode%5futf8%28s%29%2eunwrap%28%29%3b%20%2f%2f%20panics%0a%7d%0a">Run this example</a></pre>
</p><p>
</p>
</div>
</li>
<li>
<div class="signature" id="item.decode_utf8_unchecked">
<h4>
<span class="keyword">fn</span> <span class="identifier-function">decode_utf8_unchecked</span>(src: &amp;[<a href="/std/builtins/u8.html"><span class="identifier-type">u8</span></a>]) -> (<a href="/std/builtins/u32.html"><span class="identifier-type">u32</span></a>, <a href="/std/builtins/usize.html"><span class="identifier-type">usize</span></a>)</h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/string/unicode.alu#L293-L306"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Decodes a single UTF-8 code point from the given byte slice without any validation.
</p><p>
Returns the code point and the number of bytes read. This method does not
validate that the returned code point is a valid Unicode scalar value or
that it is encoded with the minimum number of bytes.
</p><p>
</p>
<h3> Examples</h3>
<p>
<pre class="with-playground-link"><code class="language-alumina">use std::string::unicode::decode_utf8_unchecked;

let s = "\xed\xa0\x80"; // pseudo-UTF8 representing U+D800 surrogate
let (code, len) = decode_utf8_unchecked(s);

assert_eq!(code, 0xD800);
assert_eq!(len, 3);
</code><a class="playground-link" target="_blank" href="https://play.alumina-lang.net/?q=fn%20main%28%29%20%7b%0a%20%20%20%20use%20std%3a%3astring%3a%3aunicode%3a%3adecode%5futf8%5funchecked%3b%0a%20%20%20%20%0a%20%20%20%20let%20s%20%3d%20%22%5cxed%5cxa0%5cx80%22%3b%20%2f%2f%20pseudo%2dUTF8%20representing%20U%2bD800%20surrogate%0a%20%20%20%20let%20%28code%2c%20len%29%20%3d%20decode%5futf8%5funchecked%28s%29%3b%0a%20%20%20%20%0a%20%20%20%20assert%5feq%21%28code%2c%200xD800%29%3b%0a%20%20%20%20assert%5feq%21%28len%2c%203%29%3b%0a%7d%0a">Run this example</a></pre>
<pre class="with-playground-link panics"><code class="language-alumina">use std::string::unicode::decode_utf8_unchecked;

let s = "\xed"; // truncated UTF-8 sequence
// panics or UBs depending on whether bound checks are enabled
decode_utf8_unchecked(s);
</code><a class="playground-link" target="_blank" href="https://play.alumina-lang.net/?q=fn%20main%28%29%20%7b%0a%20%20%20%20use%20std%3a%3astring%3a%3aunicode%3a%3adecode%5futf8%5funchecked%3b%0a%20%20%20%20%0a%20%20%20%20let%20s%20%3d%20%22%5cxed%22%3b%20%2f%2f%20truncated%20UTF%2d8%20sequence%0a%20%20%20%20%2f%2f%20panics%20or%20UBs%20depending%20on%20whether%20bound%20checks%20are%20enabled%0a%20%20%20%20decode%5futf8%5funchecked%28s%29%3b%0a%7d%0a">Run this example</a></pre>
</p><p>
</p>
</div>
</li>
<li>
<div class="signature" id="item.decode_utf16">
<h4>
<span class="keyword">fn</span> <span class="identifier-function">decode_utf16</span>(src: &amp;[<a href="/std/builtins/u16.html"><span class="identifier-type">u16</span></a>]) -> <a href="/std/result/Result.html"><span class="identifier-type">Result</span></a>&lt;(<a href="/std/builtins/u32.html"><span class="identifier-type">u32</span></a>, <a href="/std/builtins/usize.html"><span class="identifier-type">usize</span></a>), <a href="/std/string/unicode/Error.html"><span class="identifier-type">Error</span></a>&gt;</h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/string/unicode.alu#L308-L342"/>source</a>
</div>
</div>
<div class="item-doc">
</div>
</li>
<li>
<div class="signature" id="item.chars">
<h4>
<span class="keyword">fn</span> <span class="identifier-function">chars</span>(self: &amp;[<a href="/std/builtins/u8.html"><span class="identifier-type">u8</span></a>]) -> <a href="/std/string/unicode/CharsIterator.html"><span class="identifier-type">CharsIterator</span></a></h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/string/unicode.alu#L463-L467"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Iterator over Unicode codepoints of a UTF-8 string.
</p><p>
If the string is not valid UTF-8, then the iterator will return an error when an invalid
sequence is encountered.
</p><p>
</p>
<h3> Examples</h3>
<p>
<pre class="with-playground-link"><code class="language-alumina">use std::string::unicode::chars;
use std::string::unicode::Error;

let ascii = "hello"
    .chars()
    .map(Result::unwrap::&lt;u32, Error&gt;)
    .to_vector();
defer ascii.free();

assert_eq!(ascii[..], &amp;[
    'h' as u32,
    'e' as u32,
    'l' as u32,
    'l' as u32,
    'o' as u32
]);

// codepoint != grapheme cluster
let face_in_cloud = "😶‍🌫️"
    .chars()
    .map(Result::unwrap::&lt;u32, Error&gt;)
    .to_vector();
defer face_in_cloud.free();

assert_eq!(face_in_cloud[..], &amp;[
    0x1F636, //  Face Without Mouth
    0x200D,  //  Zero Width Joiner
    0x1F32B, //  Fog
    0xFE0F   //  Variation Selector-16
]);
</code><a class="playground-link" target="_blank" href="https://play.alumina-lang.net/?q=fn%20main%28%29%20%7b%0a%20%20%20%20use%20std%3a%3astring%3a%3aunicode%3a%3achars%3b%0a%20%20%20%20use%20std%3a%3astring%3a%3aunicode%3a%3aError%3b%0a%20%20%20%20%0a%20%20%20%20let%20ascii%20%3d%20%22hello%22%0a%20%20%20%20%20%20%20%20%2echars%28%29%0a%20%20%20%20%20%20%20%20%2emap%28Result%3a%3aunwrap%3a%3a%3cu32%2c%20Error%3e%29%0a%20%20%20%20%20%20%20%20%2eto%5fvector%28%29%3b%0a%20%20%20%20defer%20ascii%2efree%28%29%3b%0a%20%20%20%20%0a%20%20%20%20assert%5feq%21%28ascii%5b%2e%2e%5d%2c%20%26%5b%0a%20%20%20%20%20%20%20%20%27h%27%20as%20u32%2c%0a%20%20%20%20%20%20%20%20%27e%27%20as%20u32%2c%0a%20%20%20%20%20%20%20%20%27l%27%20as%20u32%2c%0a%20%20%20%20%20%20%20%20%27l%27%20as%20u32%2c%0a%20%20%20%20%20%20%20%20%27o%27%20as%20u32%0a%20%20%20%20%5d%29%3b%0a%20%20%20%20%0a%20%20%20%20%2f%2f%20codepoint%20%21%3d%20grapheme%20cluster%0a%20%20%20%20let%20face%5fin%5fcloud%20%3d%20%22%f0%9f%98%b6%e2%80%8d%f0%9f%8c%ab%ef%b8%8f%22%0a%20%20%20%20%20%20%20%20%2echars%28%29%0a%20%20%20%20%20%20%20%20%2emap%28Result%3a%3aunwrap%3a%3a%3cu32%2c%20Error%3e%29%0a%20%20%20%20%20%20%20%20%2eto%5fvector%28%29%3b%0a%20%20%20%20defer%20face%5fin%5fcloud%2efree%28%29%3b%0a%20%20%20%20%0a%20%20%20%20assert%5feq%21%28face%5fin%5fcloud%5b%2e%2e%5d%2c%20%26%5b%0a%20%20%20%20%20%20%20%200x1F636%2c%20%2f%2f%20%20Face%20Without%20Mouth%0a%20%20%20%20%20%20%20%200x200D%2c%20%20%2f%2f%20%20Zero%20Width%20Joiner%0a%20%20%20%20%20%20%20%200x1F32B%2c%20%2f%2f%20%20Fog%0a%20%20%20%20%20%20%20%200xFE0F%20%20%20%2f%2f%20%20Variation%20Selector%2d16%0a%20%20%20%20%5d%29%3b%0a%7d%0a">Run this example</a></pre>
</p><p>
When invalid UTF-8 is encountered, the iterator will return an error for each byte that is not a start of a valid
sequence, but still advance. This allows for resynchronization of the stream.
</p><p>
<pre class="with-playground-link"><code class="language-alumina">use std::string::unicode::chars;
use std::string::unicode::Error;

let it = "a\xed\xa0\x80b" // pseudo-UTF-8 encoding of a surrogate
    .chars();

assert_eq!(it.next(), Option::some(Result::ok('a' as u32)));
assert_eq!(it.next(), Option::some(Result::err(Error::InvalidUTF8)));
assert_eq!(it.next(), Option::some(Result::err(Error::InvalidUTF8)));
assert_eq!(it.next(), Option::some(Result::err(Error::InvalidUTF8)));
assert_eq!(it.next(), Option::some(Result::ok('b' as u32)));
assert_eq!(it.next(), Option::none());
</code><a class="playground-link" target="_blank" href="https://play.alumina-lang.net/?q=fn%20main%28%29%20%7b%0a%20%20%20%20use%20std%3a%3astring%3a%3aunicode%3a%3achars%3b%0a%20%20%20%20use%20std%3a%3astring%3a%3aunicode%3a%3aError%3b%0a%20%20%20%20%0a%20%20%20%20let%20it%20%3d%20%22a%5cxed%5cxa0%5cx80b%22%20%2f%2f%20pseudo%2dUTF%2d8%20encoding%20of%20a%20surrogate%0a%20%20%20%20%20%20%20%20%2echars%28%29%3b%0a%20%20%20%20%0a%20%20%20%20assert%5feq%21%28it%2enext%28%29%2c%20Option%3a%3asome%28Result%3a%3aok%28%27a%27%20as%20u32%29%29%29%3b%0a%20%20%20%20assert%5feq%21%28it%2enext%28%29%2c%20Option%3a%3asome%28Result%3a%3aerr%28Error%3a%3aInvalidUTF8%29%29%29%3b%0a%20%20%20%20assert%5feq%21%28it%2enext%28%29%2c%20Option%3a%3asome%28Result%3a%3aerr%28Error%3a%3aInvalidUTF8%29%29%29%3b%0a%20%20%20%20assert%5feq%21%28it%2enext%28%29%2c%20Option%3a%3asome%28Result%3a%3aerr%28Error%3a%3aInvalidUTF8%29%29%29%3b%0a%20%20%20%20assert%5feq%21%28it%2enext%28%29%2c%20Option%3a%3asome%28Result%3a%3aok%28%27b%27%20as%20u32%29%29%29%3b%0a%20%20%20%20assert%5feq%21%28it%2enext%28%29%2c%20Option%3a%3anone%28%29%29%3b%0a%7d%0a">Run this example</a></pre>
</p><p>
</p>
</div>
</li>
<li>
<div class="signature" id="item.char_indices">
<h4>
<span class="keyword">fn</span> <span class="identifier-function">char_indices</span>(self: &amp;[<a href="/std/builtins/u8.html"><span class="identifier-type">u8</span></a>]) -> <a href="/std/string/unicode/CharIndicesIterator.html"><span class="identifier-type">CharIndicesIterator</span></a></h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/string/unicode.alu#L500-L504"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Iterator over byte indices of Unicode codepoints of a UTF-8 string.
</p><p>
If the string is not valid UTF-8, then the iterator will return an error when an invalid
sequence is encountered.
</p><p>
</p>
<h3> Example</h3>
<p>
<pre class="with-playground-link"><code class="language-alumina">use std::string::unicode::char_indices;
use std::string::unicode::Error;

let text = "chữ Quốc ngữ"
    .char_indices()
    .map(Result::unwrap::&lt;(usize, u32), Error&gt;)
    .to_vector();
defer text.free();

assert_eq!(text[..], &amp;[
    (0,  'c' as u32),
    (1,  'h' as u32),
    (2,      0x1EEF),  // ữ
    (5,  ' ' as u32),
    (6,  'Q' as u32),
    (7,  'u' as u32),
    (8,      0x1ED1),  // ố
    (11, 'c' as u32),
    (12, ' ' as u32),
    (13, 'n' as u32),
    (14, 'g' as u32),
    (15,     0x1EEF),  // ữ
]);
</code><a class="playground-link" target="_blank" href="https://play.alumina-lang.net/?q=fn%20main%28%29%20%7b%0a%20%20%20%20use%20std%3a%3astring%3a%3aunicode%3a%3achar%5findices%3b%0a%20%20%20%20use%20std%3a%3astring%3a%3aunicode%3a%3aError%3b%0a%20%20%20%20%0a%20%20%20%20let%20text%20%3d%20%22ch%e1%bb%af%20Qu%e1%bb%91c%20ng%e1%bb%af%22%0a%20%20%20%20%20%20%20%20%2echar%5findices%28%29%0a%20%20%20%20%20%20%20%20%2emap%28Result%3a%3aunwrap%3a%3a%3c%28usize%2c%20u32%29%2c%20Error%3e%29%0a%20%20%20%20%20%20%20%20%2eto%5fvector%28%29%3b%0a%20%20%20%20defer%20text%2efree%28%29%3b%0a%20%20%20%20%0a%20%20%20%20assert%5feq%21%28text%5b%2e%2e%5d%2c%20%26%5b%0a%20%20%20%20%20%20%20%20%280%2c%20%20%27c%27%20as%20u32%29%2c%0a%20%20%20%20%20%20%20%20%281%2c%20%20%27h%27%20as%20u32%29%2c%0a%20%20%20%20%20%20%20%20%282%2c%20%20%20%20%20%200x1EEF%29%2c%20%20%2f%2f%20%e1%bb%af%0a%20%20%20%20%20%20%20%20%285%2c%20%20%27%20%27%20as%20u32%29%2c%0a%20%20%20%20%20%20%20%20%286%2c%20%20%27Q%27%20as%20u32%29%2c%0a%20%20%20%20%20%20%20%20%287%2c%20%20%27u%27%20as%20u32%29%2c%0a%20%20%20%20%20%20%20%20%288%2c%20%20%20%20%20%200x1ED1%29%2c%20%20%2f%2f%20%e1%bb%91%0a%20%20%20%20%20%20%20%20%2811%2c%20%27c%27%20as%20u32%29%2c%0a%20%20%20%20%20%20%20%20%2812%2c%20%27%20%27%20as%20u32%29%2c%0a%20%20%20%20%20%20%20%20%2813%2c%20%27n%27%20as%20u32%29%2c%0a%20%20%20%20%20%20%20%20%2814%2c%20%27g%27%20as%20u32%29%2c%0a%20%20%20%20%20%20%20%20%2815%2c%20%20%20%20%200x1EEF%29%2c%20%20%2f%2f%20%e1%bb%af%0a%20%20%20%20%5d%29%3b%0a%7d%0a">Run this example</a></pre>
</p><p>
</p>
</div>
</li>
<li>
<div class="signature" id="item.utf8_chars">
<h4>
<span class="keyword">fn</span> <span class="identifier-function">utf8_chars</span>&lt;It&gt;(iter: &amp;mut It) -> <a href="/std/string/unicode/Utf8Adapter.html"><span class="identifier-type">Utf8Adapter</span></a>&lt;It&gt;<div class="protocol-bound">
It: <a href="/std/iter/Iterator.html"><span class="identifier-type">Iterator</span></a>&lt;It, <a href="/std/builtins/u32.html"><span class="identifier-type">u32</span></a>&gt;</div>
</h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/string/unicode.alu#L531-L533"/>source</a>
</div>
</div>
<div class="item-doc">
<p>
Returns a formattable object that writes a sequence of
Unicode codepoints as a UTF-8 encoded string.
</p><p>
It accepts an iterator over <code class="language-alumina">u32</code> values. Panics if the iterator
yields a value that is not a valid Unicode scalar value.
</p><p>
</p>
<h3> Example</h3>
<p>
<pre class="with-playground-link"><code class="language-alumina">use std::string::unicode::utf8_chars;

let seq = [
    0x1f4a9u32,
    '=' as u32,
    0x1fa99,
    ' ' as u32,
    '&amp;' as u32,
    ' ' as u32,
    0x1fa99,
    '=' as u32,
    0x1f4a9
];

// https://sl.wikisource.org/wiki/Kons._5
println!("{}", seq.iter().utf8_chars()); // prints "💩=🪙 &amp; 💩=🪙"
</code><a class="playground-link" target="_blank" href="https://play.alumina-lang.net/?q=fn%20main%28%29%20%7b%0a%20%20%20%20use%20std%3a%3astring%3a%3aunicode%3a%3autf8%5fchars%3b%0a%20%20%20%20%0a%20%20%20%20let%20seq%20%3d%20%5b%0a%20%20%20%20%20%20%20%200x1f4a9u32%2c%0a%20%20%20%20%20%20%20%20%27%3d%27%20as%20u32%2c%0a%20%20%20%20%20%20%20%200x1fa99%2c%0a%20%20%20%20%20%20%20%20%27%20%27%20as%20u32%2c%0a%20%20%20%20%20%20%20%20%27%26%27%20as%20u32%2c%0a%20%20%20%20%20%20%20%20%27%20%27%20as%20u32%2c%0a%20%20%20%20%20%20%20%200x1fa99%2c%0a%20%20%20%20%20%20%20%20%27%3d%27%20as%20u32%2c%0a%20%20%20%20%20%20%20%200x1f4a9%0a%20%20%20%20%5d%3b%0a%20%20%20%20%0a%20%20%20%20%2f%2f%20https%3a%2f%2fsl%2ewikisource%2eorg%2fwiki%2fKons%2e%5f5%0a%20%20%20%20println%21%28%22%7b%7d%22%2c%20seq%2eiter%28%29%2eutf8%5fchars%28%29%29%3b%20%2f%2f%20prints%20%22%f0%9f%92%a9%3d%f0%9f%aa%99%20%26%20%f0%9f%92%a9%3d%f0%9f%aa%99%22%0a%7d%0a">Run this example</a></pre>
</p><p>
</p>
</div>
</li>
</ul>
<h2 id="Enum">Enums</h2>
<div class="item-short-table">
<div class="row" id="item.Error">
<div class="cell-name">
<a href="/std/string/unicode/Error.html">Error</a>
</div>
<div class="cell-doc">Error type for Unicode conversion
</div>
</div>
</div>
<h2 id="Const">Consts</h2>
<ul>
<li>
<div class="signature" id="item.TAG_CONT">
<h4>
<span class="keyword">const</span> <span class="identifier-constant">TAG_CONT</span>: <a href="/std/builtins/u8.html"><span class="identifier-type">u8</span></a> = ...</h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/string/unicode.alu#L3-L3"/>source</a>
</div>
</div>
<div class="item-doc">
</div>
</li>
<li>
<div class="signature" id="item.TAG_TWO_B">
<h4>
<span class="keyword">const</span> <span class="identifier-constant">TAG_TWO_B</span>: <a href="/std/builtins/u8.html"><span class="identifier-type">u8</span></a> = ...</h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/string/unicode.alu#L4-L4"/>source</a>
</div>
</div>
<div class="item-doc">
</div>
</li>
<li>
<div class="signature" id="item.TAG_THREE_B">
<h4>
<span class="keyword">const</span> <span class="identifier-constant">TAG_THREE_B</span>: <a href="/std/builtins/u8.html"><span class="identifier-type">u8</span></a> = ...</h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/string/unicode.alu#L5-L5"/>source</a>
</div>
</div>
<div class="item-doc">
</div>
</li>
<li>
<div class="signature" id="item.TAG_FOUR_B">
<h4>
<span class="keyword">const</span> <span class="identifier-constant">TAG_FOUR_B</span>: <a href="/std/builtins/u8.html"><span class="identifier-type">u8</span></a> = ...</h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/string/unicode.alu#L6-L6"/>source</a>
</div>
</div>
<div class="item-doc">
</div>
</li>
<li>
<div class="signature" id="item.MAX_ONE_B">
<h4>
<span class="keyword">const</span> <span class="identifier-constant">MAX_ONE_B</span>: <a href="/std/builtins/u32.html"><span class="identifier-type">u32</span></a> = ...</h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/string/unicode.alu#L7-L7"/>source</a>
</div>
</div>
<div class="item-doc">
</div>
</li>
<li>
<div class="signature" id="item.MAX_TWO_B">
<h4>
<span class="keyword">const</span> <span class="identifier-constant">MAX_TWO_B</span>: <a href="/std/builtins/u32.html"><span class="identifier-type">u32</span></a> = ...</h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/string/unicode.alu#L8-L8"/>source</a>
</div>
</div>
<div class="item-doc">
</div>
</li>
<li>
<div class="signature" id="item.MAX_THREE_B">
<h4>
<span class="keyword">const</span> <span class="identifier-constant">MAX_THREE_B</span>: <a href="/std/builtins/u32.html"><span class="identifier-type">u32</span></a> = ...</h4>
<div class="source-link">
<a href="https://github.com/alumina-lang/alumina/blob/master/sysroot/std/string/unicode.alu#L9-L9"/>source</a>
</div>
</div>
<div class="item-doc">
</div>
</li>
</ul>
</main>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/prism.min.js" integrity="sha512-RDQSW3KoqJMiX0L/UBgwBmH1EmRYp8LBOiLaA8rBHIy+7OGP/7Gxg8vbt8wG4ZYd29P0Fnoq6+LOytCqx3cyoQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="/static/prism-alumina.js"></script>
</body>
</html>
